<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Touch Yellow - Level 1</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: black; }
        canvas { display: block; cursor: none; }
        #cursor-dot {
            width: 8px; height: 8px; background: white; border-radius: 50%;
            position: absolute; pointer-events: none; z-index: 10;
        }
    </style>
</head>
<body>

    <div id="cursor-dot"></div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const dot = document.getElementById('cursor-dot');

        // These rectangles define the "Safe Blue Path"
        // Format: [x, y, width, height] (using percentages 0-1)
        let safeZones = [];
        let goalZone = {};

        function setupLevel() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const w = canvas.width;
            const h = canvas.height;

            // Define the path based on your image
            safeZones = [
                {x: 0, y: h*0.6, w: w*0.6, h: h*0.15},       // Bottom horizontal
                {x: w*0.55, y: h*0.4, w: w*0.1, h: h*0.3},    // First vertical up
                {x: w*0.55, y: h*0.4, w: w*0.4, h: h*0.12},   // Middle horizontal right
                {x: w*0.85, y: h*0.1, w: w*0.1, h: h*0.4},    // Second vertical up
                {x: w*0.55, y: h*0.1, w: w*0.4, h: h*0.12}    // Top horizontal left
            ];

            // Define the goal (Yellow box)
            goalZone = {x: w*0.55, y: 0, w: w*0.1, h: h*0.1};

            drawLevel();
        }

        function drawLevel() {
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw Blue Path
            ctx.fillStyle = "#26a9e1"; 
            safeZones.forEach(rect => {
                ctx.fillRect(rect.x, rect.y, rect.w, rect.h);
            });

            // Draw Goal
            ctx.fillStyle = "#f1a92a";
            ctx.fillRect(goalZone.x, goalZone.y, goalZone.w, goalZone.h);
        }

        window.addEventListener('mousemove', (e) => {
            const mx = e.clientX;
            const my = e.clientY;

            // Update custom dot
            dot.style.left = mx - 4 + 'px';
            dot.style.top = my - 4 + 'px';

            // 1. Check if we hit the goal
            if (mx >= goalZone.x && mx <= goalZone.x + goalZone.w &&
                my >= goalZone.y && my <= goalZone.y + goalZone.h) {
                alert("Level 1 Complete!");
                window.location.href = "../index.html"; 
                return;
            }

            // 2. Check if we are inside ANY safe zone
            let isSafe = false;
            for (let rect of safeZones) {
                if (mx >= rect.x && mx <= rect.x + rect.w &&
                    my >= rect.y && my <= rect.y + rect.h) {
                    isSafe = true;
                    break;
                }
            }

            // 3. If not safe and not in goal -> Death
            if (!isSafe) {
                window.location.href = "../index.html";
            }
        });

        window.addEventListener('resize', setupLevel);
        setupLevel();
    </script>
</body>
</html>