<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Touch Yellow RE</title>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Roboto:wght@700&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Roboto', sans-serif; background-color: #4d4d4d; user-select: none; }
        
        .screen { position: absolute; width: 100%; height: 100%; display: none; }
        #menu-screen { display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 20; }
        #game-screen { background-color: black; z-index: 10; }

        /* Title & Menu */
        .title { font-family: 'Luckiest Guy', cursive; color: #f2ef45; font-size: clamp(40px, 8vw, 80px); line-height: 0.8; margin-bottom: 50px; text-transform: uppercase; text-shadow: 3px 3px 0px #000; text-align: center; pointer-events: none; }
        .options-container { display: flex; flex-direction: column; gap: 30px; width: 300px; }
        .option { display: flex; align-items: center; cursor: pointer; color: #000; transition: transform 0.1s; }
        .option:hover { transform: scale(1.05); }
        .circle { background-color: #f2a922; border-radius: 50%; border: 3px solid #333; margin-right: 15px; flex-shrink: 0; }
        .start-circle { width: 40px; height: 40px; }
        .exit-circle { width: 70px; height: 70px; }
        .label { font-size: 28px; font-weight: 900; white-space: nowrap; }
        .label-large { font-size: 60px; }

        /* Maze Pieces (No Images used) */
        .path { position: absolute; background-color: #26a9e1; z-index: 11; pointer-events: auto; }
        .goal { position: absolute; background-color: #f1a92a; z-index: 12; cursor: pointer; }
    </style>
</head>
<body oncontextmenu="return false;">

    <!-- MENU SCREEN -->
    <div id="menu-screen" class="screen" style="display: flex;">
        <h1 class="title">Touch yellow<br>RE</h1>
        <div class="options-container">
            <div class="option" onclick="startLevel(1)">
                <div id="start-anchor" class="circle start-circle"></div>
                <div class="label"><- Start/Restart</div>
            </div>
            <div class="option" onclick="exitGame()">
                <div class="circle exit-circle"></div>
                <div class="label label-large"><-Exit</div>
            </div>
        </div>
    </div>

    <!-- GAME SCREEN -->
    <div id="game-screen" class="screen" onmousemove="checkDeath(event)">
        <!-- Maze elements will be injected here -->
    </div>

    <script>
        const menu = document.getElementById('menu-screen');
        const game = document.getElementById('game-screen');
        const startAnchor = document.getElementById('start-anchor');

        let isAlive = false;

        function startLevel(lvl) {
            game.innerHTML = ''; // Clear old maze
            isAlive = false; // Disable death briefly
            
            menu.style.display = 'none';
            game.style.display = 'block';

            // Get the Start Circle position
            const rect = startAnchor.getBoundingClientRect();
            const startX = rect.left;
            const startY = rect.top;
            const thick = rect.width; // Use the circle size as path thickness

            if (lvl === 1) {
                // We create the "S" shape path using DIVs
                // 1. Horizontal from Left edge to Button
                createPath(0, startY, startX + thick, thick);
                
                // 2. Vertical Up from Button
                createPath(startX, startY - 150, thick, 150);

                // 3. Horizontal Right
                createPath(startX, startY - 150, 250, thick);

                // 4. Vertical Up again
                createPath(startX + 250 - thick, startY - 350, thick, 200);

                // 5. Horizontal Left (Top path)
                createPath(startX + 100, startY - 350, 150, thick);

                // 6. The Goal (Yellow Box)
                createGoal(startX + 100, startY - 430, 80, 80);
            }

            // Give the player 200ms to register their mouse position before enabling death
            setTimeout(() => { isAlive = true; }, 200);
        }

        function createPath(x, y, w, h) {
            const d = document.createElement('div');
            d.className = 'path';
            d.style.left = x + 'px';
            d.style.top = y + 'px';
            d.style.width = w + 'px';
            d.style.height = h + 'px';
            // Stop the move event from reaching the black background
            d.onmousemove = (e) => { e.stopPropagation(); };
            game.appendChild(d);
        }

        function createGoal(x, y, w, h) {
            const g = document.createElement('div');
            g.className = 'goal';
            g.style.left = x + 'px';
            g.style.top = y + 'px';
            g.style.width = w + 'px';
            g.style.height = h + 'px';
            g.onmouseenter = () => {
                isAlive = false;
                alert("LEVEL COMPLETE!");
                resetToMenu();
            };
            g.onmousemove = (e) => { e.stopPropagation(); };
            game.appendChild(g);
        }

        function checkDeath(e) {
            if (isAlive) {
                resetToMenu();
            }
        }

        function resetToMenu() {
            isAlive = false;
            game.style.display = 'none';
            menu.style.display = 'flex';
        }

        function exitGame() {
            window.location.href = "https://github.com/mmk1102x/touch-yellow";
        }
    </script>
</body>
</html>